<app-loading [condition]="isLoading"></app-loading>

<div *ngIf="!isLoading">
  <h4 class="card-header">User map</h4>
  <div class="map">
    <agm-map (zoomChange)="updateMap($event)" [latitude]="init_lat" [longitude]="init_lng" [zoom]="zoom" [streetViewControl]="false">
      <agm-marker *ngFor="let user of users" [latitude]="user.latitude" [longitude]="user.longitude">
        <agm-info-window>
          <div class="info-window-content">
            {{user.username}}<br/> Products: {{user.products.length}}<br/>
            <button type="button" (click)="filterByUser(user._id)">Show user's products</button>
          </div>
        </agm-info-window>
      </agm-marker>
    </agm-map>
  </div>
</div>
